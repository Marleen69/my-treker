# Инструкция по настройке Трекера Привычек

## Быстрый старт (без Google Sheets)

Приложение работает и без Google Sheets - данные сохраняются в браузере (localStorage).

1. Откройте `index.html` в браузере
2. Начните добавлять привычки и отмечать выполнение
3. Данные автоматически сохраняются в браузере

## Настройка интеграции с Google Sheets

### Шаг 1: Создание Google Cloud проекта

1. Перейдите на [Google Cloud Console](https://console.cloud.google.com/)
2. Создайте новый проект или выберите существующий
3. Назовите проект (например, "Habit Tracker")

### Шаг 2: Включение Google Sheets API

1. В меню слева выберите **APIs & Services** > **Library**
2. Найдите "Google Sheets API"
3. Нажмите **Enable** (Включить)

### Шаг 3: Создание учетных данных

1. Перейдите в **APIs & Services** > **Credentials**
2. Нажмите **Create Credentials** > **API Key**
3. Скопируйте созданный API ключ
4. (Опционально) Ограничьте API ключ:
   - Нажмите на созданный ключ
   - В разделе "API restrictions" выберите "Restrict key"
   - Выберите "Google Sheets API"
   - Сохраните изменения

### Шаг 4: Настройка OAuth 2.0 (для авторизации)

1. В разделе **Credentials** нажмите **Create Credentials** > **OAuth client ID**
2. Если появится запрос на настройку экрана согласия:
   - Выберите "External"
   - Заполните название приложения
   - Добавьте свой email в "User support email"
   - В "Authorized domains" добавьте "localhost" (для тестирования)
   - Сохраните и продолжите
3. Выберите тип приложения: **Web application**
4. Назовите клиент (например, "Habit Tracker Web")
5. В "Authorized JavaScript origins" добавьте:
   - `http://localhost` (для локального тестирования)
   - `https://ваш-домен.com` (для продакшена)
6. В "Authorized redirect URIs" добавьте:
   - `http://localhost` (для локального тестирования)
7. Нажмите **Create**
8. Скопируйте **Client ID**

### Шаг 5: Создание Google Таблицы

1. Откройте [Google Sheets](https://sheets.google.com/)
2. Создайте новую таблицу
3. Назовите её (например, "Трекер Привычек")
4. Скопируйте ID таблицы из URL:
   - URL выглядит так: `https://docs.google.com/spreadsheets/d/ВАШ_ID_ТАБЛИЦЫ/edit`
   - Скопируйте часть между `/d/` и `/edit`

### Шаг 6: Настройка прав доступа

1. В Google Таблице нажмите **Share** (Поделиться)
2. Добавьте email, связанный с вашим Google Cloud проектом
3. Дайте права **Editor** (Редактор)
4. Сохраните

### Шаг 7: Настройка приложения

1. Откройте файл `app.js`
2. Найдите строки:
   ```javascript
   let CLIENT_ID = ''; // Замените на ваш Client ID
   let API_KEY = ''; // Замените на ваш API Key
   ```
3. Вставьте ваши значения:
   ```javascript
   let CLIENT_ID = 'ваш-client-id.apps.googleusercontent.com';
   let API_KEY = 'ваш-api-key';
   ```

4. В файле `index.html` найдите:
   ```html
   <div id="g_id_onload" data-client_id="" data-callback="handleCredentialResponse"></div>
   ```
5. Добавьте ваш Client ID:
   ```html
   <div id="g_id_onload" data-client_id="ваш-client-id.apps.googleusercontent.com" data-callback="handleCredentialResponse"></div>
   ```

### Шаг 8: Использование

1. Откройте `index.html` в браузере
2. Введите ID вашей Google Таблицы в поле
3. Нажмите "Сохранить ID"
4. Авторизуйтесь через Google (если настроено)
5. Начните использовать трекер!

## Альтернативный способ (без авторизации)

Если вы не хотите настраивать OAuth, можно использовать только API Key:

1. В `app.js` оставьте `CLIENT_ID` пустым
2. Используйте только поле для ввода ID таблицы
3. Данные будут сохраняться через API Key (требует публичного доступа к таблице)

**Внимание:** Для безопасности лучше использовать OAuth авторизацию.

## Размещение на хостинге

### Вариант 1: GitHub Pages (бесплатно)

1. Создайте репозиторий на GitHub
2. Загрузите файлы проекта
3. В настройках репозитория включите GitHub Pages
4. Обновите Authorized JavaScript origins в Google Cloud Console на ваш GitHub Pages URL

### Вариант 2: Другой хостинг

1. Загрузите файлы на ваш хостинг
2. Обновите Authorized JavaScript origins в Google Cloud Console
3. Убедитесь, что используется HTTPS

## Устранение проблем

### Ошибка "API key not valid"
- Проверьте, что API Key правильно скопирован
- Убедитесь, что Google Sheets API включен

### Ошибка "Access denied"
- Проверьте права доступа к таблице
- Убедитесь, что таблица не приватная

### Данные не сохраняются
- Проверьте консоль браузера (F12) на наличие ошибок
- Убедитесь, что ID таблицы правильный
- Проверьте права доступа к таблице

### График не отображается
- Убедитесь, что Chart.js загружается (проверьте интернет-соединение)
- Проверьте консоль браузера на ошибки

## Безопасность

⚠️ **Важно:** Не публикуйте ваш API Key и Client ID в публичных репозиториях!

Для продакшена:
- Используйте переменные окружения
- Ограничьте API Key только нужными доменами
- Используйте OAuth вместо прямого доступа через API Key

